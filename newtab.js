const lineups = {
    "Abyss": {
        "Sova": {
            "A Main Early": "https://www.youtube.com/embed/04K6YaRNtE8?si=WONOfX5pnAyTyBLn&amp;start=6&end=24",
            "A Exec": "https://www.youtube.com/embed/04K6YaRNtE8?si=WONOfX5pnAyTyBLn&amp;start=34&end=55",
            "A Main Defense": "https://www.youtube.com/embed/04K6YaRNtE8?si=WONOfX5pnAyTyBLn&amp;start=118&end=130",
            "B Exec": "https://www.youtube.com/embed/04K6YaRNtE8?si=WONOfX5pnAyTyBLn&amp;start=254&end=270",
            "B Main Defense": "https://www.youtube.com/embed/04K6YaRNtE8?si=WONOfX5pnAyTyBLn&amp;start=358&end=374"
        }
    },
    "Ascent": {
        "Sova": {
            "B Main Defense": "https://www.youtube.com/embed/TllBMnOrZPo?si=7AiAh1FbP69JYfGF&amp;start=17&end=30",
            "B Retake Defense": "https://www.youtube.com/embed/TllBMnOrZPo?si=7AiAh1FbP69JYfGF&amp;start=293&end=297",
            "A Defense From Market": "https://www.youtube.com/embed/TllBMnOrZPo?si=7AiAh1FbP69JYfGF&amp;start=389&end=402",
            "A Hell Defense": "https://www.youtube.com/embed/TllBMnOrZPo?si=7AiAh1FbP69JYfGF&amp;start=446&end=450",
            "B Main Attack": "https://www.youtube.com/embed/TllBMnOrZPo?si=7AiAh1FbP69JYfGF&amp;start=760&end=776",
        }
    },
    "Bind": {
        "Sova": {
            "A Attack Dart": "https://www.youtube.com/embed/bwgOsUZcgq8?si=qGAuSAWcYV6fnc3e&amp;start=13&end=27",
            "B Attack Long": "https://www.youtube.com/embed/bwgOsUZcgq8?si=qGAuSAWcYV6fnc3e&amp;start=143&end=156",
            "B Exec": "https://www.youtube.com/embed/bwgOsUZcgq8?si=qGAuSAWcYV6fnc3e&amp;start=225&end=235",
            "A Short Defense": "https://www.youtube.com/embed/bwgOsUZcgq8?si=qGAuSAWcYV6fnc3e&amp;start=282&end=293",
            "B Defense Long": "https://www.youtube.com/embed/bwgOsUZcgq8?si=qGAuSAWcYV6fnc3e&amp;start=357&end=370"
        }
    },
    "Haven": {
        "Sova": {
            "A Exec": "https://www.youtube.com/embed/czketOpD2p8?si=rw7VSm79VDipJb43&amp;start=10&end=24",
            "B Exec": "https://www.youtube.com/embed/czketOpD2p8?si=rw7VSm79VDipJb43&amp;start=34&end=50",
            "C Exec": "https://www.youtube.com/embed/czketOpD2p8?si=rw7VSm79VDipJb43&amp;start=59&end=72",
            "A Main Defense": "https://www.youtube.com/embed/czketOpD2p8?si=rw7VSm79VDipJb43&amp;start=258&end=268",
            "B Retake Defense": "https://www.youtube.com/embed/czketOpD2p8?si=rw7VSm79VDipJb43&amp;start=363&end=373",
            "C Retake Defense": "https://www.youtube.com/embed/czketOpD2p8?si=rw7VSm79VDipJb43&amp;start=431&end=445"
        }
    },
    "Sunset": {
        "Sova": {
            "A Exec": "https://www.youtube.com/embed/vgfDU-_cXTc?si=Sntbg4eGhveu7gSt&amp;start=10&end=22", 
            "B Exec": "https://www.youtube.com/embed/vgfDU-_cXTc?si=Sntbg4eGhveu7gSt&amp;start=183&end=204", 
            "A Elbow Attack": "https://www.youtube.com/embed/vgfDU-_cXTc?si=Sntbg4eGhveu7gSt&amp;start=51&end=65",
            "A Retake Defense": "https://www.youtube.com/embed/vgfDU-_cXTc?si=Sntbg4eGhveu7gSt&amp;start=436&end=448",
            "B Retake/Support Defense": "https://www.youtube.com/embed/vgfDU-_cXTc?si=Sntbg4eGhveu7gSt&amp;start=526&end=537" 
        }
    },
    "Pearl": {
        "Sova": {
            "A Main": "https://www.youtube.com/embed/3ATKevAGLMw?si=NhwH1SEDZW8dPe3n&amp;start=11&end=21",
            "A Exec": "https://www.youtube.com/embed/3ATKevAGLMw?si=NhwH1SEDZW8dPe3n&amp;start=53&end=73",  
            "B Main": "https://www.youtube.com/embed/3ATKevAGLMw?si=NhwH1SEDZW8dPe3n&amp;start=208&end=225", 
            "B Exec": "https://www.youtube.com/embed/3ATKevAGLMw?si=NhwH1SEDZW8dPe3n&amp;start=236&end=251",
            "A Retake Defense": "https://www.youtube.com/embed/3ATKevAGLMw?si=NhwH1SEDZW8dPe3n&amp;start=421&end=432",
            "B Retake Defense": "https://www.youtube.com/embed/3ATKevAGLMw?si=NhwH1SEDZW8dPe3n&amp;start=536&end=550"  
        }
    },
    "Split": {
        "Sova": {
            "A Exec": "https://www.youtube.com/embed/k7GGhJ0NJCU?si=6K_VxTeOwzX4wkVP&amp;start=12&end=28",
            "B Exec": "https://www.youtube.com/embed/k7GGhJ0NJCU?si=6K_VxTeOwzX4wkVP&amp;start=158&end=173",
            "Mid Info Attack": "https://www.youtube.com/embed/k7GGhJ0NJCU?si=6K_VxTeOwzX4wkVP&amp;start=239&end=253",
            "A Retake": "https://www.youtube.com/embed/k7GGhJ0NJCU?si=6K_VxTeOwzX4wkVP&amp;start=320&end=335",
            "B Retake": "https://www.youtube.com/embed/k7GGhJ0NJCU?si=6K_VxTeOwzX4wkVP&amp;start=458&end=470"    
        }
    }
};

document.addEventListener('DOMContentLoaded', () => { // wait for document to fully load before accessing popup elements

    generate(); // generate a random lineup at the start

    document.getElementById("regenerate").addEventListener('click', generate); // once the generate button is pressed, generate a new lineup

    function randomizer(lineups) {
        let map;
        let agent;
        let lineName;
        let lineLink;

        // first set of keys are the map
        let maps = Object.keys(lineups)
        map = maps[Math.floor(Math.random() * maps.length)]

        // second set of keys is the agent
        let agents = Object.keys(lineups[map])
        agent = agents[Math.floor(Math.random() * agents.length)]

        // third set of keys contain the type of lineup
        let lineNames = Object.keys(lineups[map][agent])
        lineName = lineNames[Math.floor(Math.random() * lineNames.length)]

        // the values are now the link of the linup which we will use to update the src value in the iframe element
        lineLink = lineups[map][agent][lineName]
        
        return [map, agent, lineName, lineLink]
    }

    function generate() {
        // generate and access the elements
        let lineup = randomizer(lineups)
        map = lineup[0]
        agent = lineup[1]
        lineName = lineup[2]
        lineLink = lineup[3]

        // test
        // console.log(map)
        // console.log(agent)
        // console.log(lineName)
        // console.log(lineLink)

        // update the link of the iframe
        let iFrame = document.getElementById("player")
        iFrame.src = lineLink

        // update the title displayed at the top of the popup
        let title = document.getElementById("title")
        title.innerHTML = map + " - " + agent + " - " + lineName
    }
});